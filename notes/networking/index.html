<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">


<title>Networking – Mechpen</title>


<link rel="icon" type="image/png" href="/assets/favicon.png">

    <script type="text/javascript">

  var currentTheme = localStorage.getItem('theme')

  function setTheme(theme) {
    if (theme === "dark") {
      document.documentElement.setAttribute('theme', 'dark')
    } else {
      document.documentElement.setAttribute('theme', 'light')
    }
  }
  setTheme(currentTheme)

  function switchTheme() {
    if (currentTheme == "dark") {
      currentTheme = ""
    } else {
      currentTheme = "dark"
    }
    localStorage.setItem('theme', currentTheme)
    setTheme(currentTheme)
  }

</script>

    
    
    <link href="/assets/prism.css" rel="stylesheet" />
    
    <link href="/assets/style.css" rel="stylesheet" />
  </head>

  <body>
    <div>
      <div class="container">
        <header class="masthead clearfix">
          <div class="site-info">
            <a href="/" class="site-name">Mechpen</a>
          </div>
          <nav>
	    <a href="/">posts</a>
	    <a href="/notes">notes</a>
	    <a href="/about">about</a>
            <a id="light-mode" onclick="switchTheme()">light mode</a>
            <a id="dark-mode" onclick="switchTheme()">dark mode</a>
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      
<article class="page">
  <h1>Networking</h1>

  <div class="entry">
    <h2 id="tcp-failure-modes">TCP failure modes <a class="header-anchor" href="#tcp-failure-modes" aria-hidden="true">¶</a></h2>
<p>All these failure modes are from the kernel network stack, and has
nothing to do with userspace applications.</p>
<ul>
<li>
<p><code>Connection timeout</code> could happen when the <code>SYN</code> or <code>SYN-ACK</code>
packets are dropped.  The timeout period could be tweaked with
<code>/proc/sys/net/ipv4/tcp_syn_retries</code>.</p>
</li>
<li>
<p><code>Connection reject/reset</code> when <code>RST</code> is received.  A remote peer
replies <code>RST</code> if its port is not open.</p>
</li>
<li>
<p>ICMP host unreachable. (??? what error is returned to user ???)</p>
</li>
<li>
<p>ICMP unreachable need frag: PMTU discovery.</p>
</li>
<li>
<p>After connection is established, TCP keep-alive timeout is very
long (a few hours).  So if a remote peer goes away without sending
FIN, it could take a very long time for the local host to
interrupt the TCP session.  For long lasting connections, the
applications should always ping remote periodically.</p>
</li>
</ul>
<h3 id="conntrack-states-(%3F%3F%3F-verify-%3F%3F%3F)%3A">Conntrack states (??? verify ???): <a class="header-anchor" href="#conntrack-states-(%3F%3F%3F-verify-%3F%3F%3F)%3A" aria-hidden="true">¶</a></h3>
<p>'NEW' -&gt; 'NEW'</p>
<p>'ACK' -&gt; 'ESTABLISHED'</p>
<p>'FIN/RST' -&gt; 'INVALID' and delete entry</p>
<h3 id="examples%3A">Examples: <a class="header-anchor" href="#examples%3A" aria-hidden="true">¶</a></h3>
<h2 id="udp-failure-modes">UDP failure modes <a class="header-anchor" href="#udp-failure-modes" aria-hidden="true">¶</a></h2>
<ul>
<li>
<p>ICMP port unreachable -- <code>connection reject</code></p>
</li>
<li>
<p>ICMP host unreachable (???)</p>
</li>
</ul>

  </div>
</article>

    </div>
  </body>
</html>
